function getRoot() {
    var root="http://"+document.location.hostname+"/";
    return root;
}
//Ajax do formulário de Alteração da Senha
$("#formAlterarSenha").on("submit",function(event){
    event.preventDefault();
    var dados=$(this).serialize();

    $.ajax({
       url: getRoot()+'controllers/controllerAlterarSenha',
        type: 'post',
        dataType: 'json',
        data: dados,
        success: function (response) {
            if(response.retorno == 'success'){
                $('.retornoAltSenha').empty();
                alert('Sua senha foi atualizada');
                window.location.href=response.page;
            }else{
                $('.retornoAltSenha').empty();
                $.each(response.erros,function(key,value){
                    $('.retornoAltSenha').append(value+'<br>');
                });
            }
        }
    });
});
//Ajax do formulário de Alteração de Nome e Email
$("#formAlterarPerfil").on("submit",function(event){
    event.preventDefault();
    var dados=$(this).serialize();

    $.ajax({
       url: getRoot()+'controllers/controllerPerfil',
        type: 'post',
        dataType: 'json',
        data: dados,
        success: function (response) {
            if(response.retorno == 'success'){
                $('.retornoAltPerfil').empty();
                alert('Seu perfil foi atualizado');
                window.location.href=response.page;
            }else{
                $('.retornoAltPerfil').empty();
                $.each(response.erros,function(key,value){
                    $('.retornoAltPerfil').append(value+'<br>');
                });
            }
        }
    });
});
//Ajax do formulário de cadastro
$("#formCadastro").on("submit",function(event){
    event.preventDefault();
    var dados=$(this).serialize();

    $.ajax({
       url: getRoot()+'controllers/controllerCadastro',
        type: 'post',
        dataType: 'json',
        data: dados,
        success: function (response) {
            $('.retornoCad').empty();
            if(response.retorno == 'erro'){
                $.each(response.erros,function(key,value){
                    $('.retornoCad').append(value+'<br>');
                });
            }else{
                $('.retornoCad').append('Dados inseridos com sucesso');
            }
        }
    });
});

//Ajax do formulário de login
$("#formLogin").on("submit",function(event){
    event.preventDefault();
    var dados=$(this).serialize();

    $.ajax({
       url: getRoot()+'controllers/controllerLogin',
        type: 'post',
        dataType: 'json',
        data: dados,
        success: function (response) {
            if(response.retorno == 'success'){
                window.location.href=response.page;
            }else{
                if(response.tentativas == true){
                    $('.loginFormulario').hide();
                }
                $('.resultadoForm').empty();
                $.each(response.erros,function(key,value){
                    $('.resultadoForm').append(value+'<br>');
                });
            }
        }
    });
});

$("#parada-total").on("click", () => {
    alert("Desativando sensores de temperatura... \nDesativando sensores de umidade relativa do ar...\nDesativando sensores de luminosidade...\nDesativando sensores de portas abertas...\nDesativando sensores de potencial de hidrogênio...\nDesativando sensores de oxigênio dissolvido...\nDesativando sensores de condutividade elétrica..\nDesativando sub-sistema de formulação da solução nutritiva...\nDesativando sub-sistema de circulação da solução nutritiva...\nDesativando sistema de iluminação...\nAtivando sub-sistema de alerta...\nEnviando mensagens de alerta para os responsáveis...\n  Comutando para sistema de alimentação alternativa...\nDesativando sistema de alimentação principal...");
});
